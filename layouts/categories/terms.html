{{ define "main" }}
<article class="archive">
    <h1>Categories</h1>
    {{ range .Data.Terms.ByCount }}
    <div class="column is-half-mobile is-one-third-tablet is-one-quarter-desktop is-one-fifth-widescreen">
      <div class="card">
        <div class="card-image">
          <a href="{{ .Page.Permalink }}">
            <figure class="image is-3by2">
              {{ $firstChild := index .Pages 0 }}
              {{ with $firstChild.Params.featured_image }}
              {{ $featured_image := $firstChild.Params.featured_image }}
              {{ $image_url := printf "%s%s" site.Params.cloudflare_images $featured_image }}
              <img src="{{ $image_url }}/w=1200,gamma=0.4,quality=50" alt="">
              {{ end }}
            </figure>
          </a>
        </div>
        <div class="card-content has-text-centered">
          <div>
            <a class="title is-5 is-size-6-mobile" href="{{ .Page.Permalink }}">{{ .Page.Title }}</a>
            {{ $pageCount := len .Pages }}
            <p>{{ $pageCount }} post{{ if ne $pageCount 1 }}s{{ end }} </p>
          </div>
        </div>
      </div>
    </div>
    {{ end }}
</article>
{{ end }}